# TLS demo

Inspired by <https://www.youtube.com/watch?v=kxKLYDLzuHA>


## How TLS works (for server-only TLS)
- there is a Certificate Authority(CA) that issues domain certificates
- this CA must be known to client so it can trust the issued certificates
- in our example, the CA is minica, recognized with `cert/minica/minica.pem`, and it issues a certificate for domain `localhost`
- http server uses `localhost` certificate generated by minica to authenticate itself (`cert/localhost/cert.pem`, `cert/localhost/key.pem`)
- http client trusts minica because we tell it so (by providing cert/minica/minica.pem as CA certificate):
  - for curl we specify `--cacert cert/minica/minica.pem`
  - for firefox we import `cert/minica/minica.pem` under: Preferences -> Certificates -> View Certificates -> Import...
  - for go client we supply `cert/minica/minica.pem` in TLS configuration

## Steps

- install minica from <https://github.com/jsha/minica>
- generate cert for localhost 
```shell
./minica --domains  localhost
```

, this will get you new directory:
```
localhost/
 - key.pem
 - cert.pem
```

- run server with generated certificate
- curl with Certificate Authority provided:
```shell
curl --cacert minica/minica.pem https://localhost:9000
```