# Go Gin Framework Crash Course (with BasicAuth, JWT, GORM+SQLite3 and Swagger)
## Source Video Tutorial 
https://www.youtube.com/watch?v=qR0WnWL2o1Q&list=PL3eAkoh7fypr8zrkiygiY1e9osoqjoV9w&index=1


## Application WEB view
http://localhost:8080/view/videos

## API
- Basic Auth test (credentials in base64 - admin:pass)
```bash
curl -H "Authorization: Basic YWRtaW46cGFzcw==" -X GET localhost:8080/api/v1/auth/basicauth
# response:
{"messsage":"BasicAuth credentials OK"}
```

- Login (generates JWT to be used in next requests)
```bash
curl -X POST 'localhost:8080/api/v1/auth/token?username=admin&password=pass'
# response:
{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiYWRtaW4iOnRydWUsImV4cCI6MTYwMjc1MjQxNSwiaWF0IjoxNjAyNDkzMjE1LCJpc3MiOiJtYXRldXN6bWlkb3IuY29tIn0.EuoHF1zVYkMvfjLD58BJFOYVXnh6EsaLb5RMwkhXTwM"}
```

- Get all videos (requires JWT)
```bash
curl \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiYWRtaW4iOnRydWUsImV4cCI6MTYwMjc1MjQxNSwiaWF0IjoxNjAyNDkzMjE1LCJpc3MiOiJtYXRldXN6bWlkb3IuY29tIn0.EuoHF1zVYkMvfjLD58BJFOYVXnh6EsaLb5RMwkhXTwM" \
-X GET localhost:8080/api/v1/videos
```

- Add video (requires JWT)
``` bash
curl \
-H "Content-Type: application/json" \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiYWRtaW4iOnRydWUsImV4cCI6MTYwMjc1MjQxNSwiaWF0IjoxNjAyNDkzMjE1LCJpc3MiOiJtYXRldXN6bWlkb3IuY29tIn0.EuoHF1zVYkMvfjLD58BJFOYVXnh6EsaLb5RMwkhXTwM" \
-d \
'{
    "title": "Orwell 1984",
    "description": "Audiobook by Novel 1984 of G. Orwell",
    "url": "https://www.youtube.com/embed/scqLliarGpM",
    "author" : {
        "firstname": "George",
        "lastname":"Orwell",
        "age": 75,
        "email": "g.orwell@gmail.com"
    }
}' \
-X POST \
localhost:8080/api/v1/videos
```

- Update video (requires JWT)
``` bash
curl \
-H "Content-Type: application/json" \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiYWRtaW4iOnRydWUsImV4cCI6MTYwMjc1MjQxNSwiaWF0IjoxNjAyNDkzMjE1LCJpc3MiOiJtYXRldXN6bWlkb3IuY29tIn0.EuoHF1zVYkMvfjLD58BJFOYVXnh6EsaLb5RMwkhXTwM" \
-d \
'{
    "title": "MORZA Wszeteczne",
    "description": "Historie prosto z morza",
    "url": "https://www.youtube.com/embed/Rt9Ne36LGUk",
    "author": {
        "firstname": "Marcin",
        "lastname": "Mordka",
        "age": 43,
        "email": "mordka@marcin.com"
    }
}' \
-X PUT \
localhost:8080/api/v1/videos/1
```

- Delete video (requires JWT)
``` bash
curl \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiYWRtaW4iOnRydWUsImV4cCI6MTYwMjc1MjQxNSwiaWF0IjoxNjAyNDkzMjE1LCJpc3MiOiJtYXRldXN6bWlkb3IuY29tIn0.EuoHF1zVYkMvfjLD58BJFOYVXnh6EsaLb5RMwkhXTwM" \
-X DELETE \
localhost:8080/api/v1/videos/1
```

## Database generated by GORM
![Logo](media/database.png)

## Install swagger (installs $GOPATH/bin/swag)
```bash
go get -u github.com/swaggo/swag/cmd/swag
```

## Generate swagger documentation
```bash
$GOPATH/bin/swag init
```
## View swagger documentation
```
localhost:8080/swagger/index.html
```
first POST /auth/token, then Authorize with received JWT token using following:
```
Bearer <token string>
```

